<%= form_for(@micropost) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field" id="micropost_entry">
    <%= f.text_area :content, placeholder: "Compose new micropost..." %>
  </div>
  <span><h3><span id="charCounter">140</span> chars left</h3></span>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %>


<script>
  $(document).ready(
    function ()
    {
      const MAX_CHARS = 140;

      $('#micropost_content').keyup
      (
        function()
        {
          //console.log($(this).val());
          var len = $(this).val().length; //$(this).val().trim().length;
          //console.log(len);
          
          var numCharsLeft = MAX_CHARS;

          if (len >= MAX_CHARS)
          {
             numCharsLeft = 0;
          }
          else
          {
            numCharsLeft = MAX_CHARS - len;
          }
                    
          $('#charCounter').text(numCharsLeft);
        }
      ); //end keyup
    }
  ); //end ready
</script>
